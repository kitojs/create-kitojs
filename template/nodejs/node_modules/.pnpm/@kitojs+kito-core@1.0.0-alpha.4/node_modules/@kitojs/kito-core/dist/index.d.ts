/* auto-generated by NAPI-RS */
/* eslint-disable */

export declare class ExternalObject<T> {
  readonly '': {
    readonly '': unique symbol
    [K: symbol]: T
  }
}
export declare class ServerCore {
  constructor(config: ServerOptionsCore)
  getConfig(): ServerOptionsCore
  setConfig(config: ServerOptionsCore): void
  addRoute(route: Route): void
  /**
   * Start the HTTP server and execute the `ready` callback if provided.
   *
   * # Safety
   *
   * This function is unsafe because it exposes logic that will be called from JavaScript via N-API, and depends on:
   * - The `ServerCore` object remains alive while async tasks are running.
   * - The `ThreadsafeFunction` passed (if it exists) is valid and has not been released.
   * - `start` is not called twice simultaneously on the same instance.
   *
   * The caller must guarantee these conditions.
   */
  start(ready: (() => void) | undefined): Promise<void>
  close(): void
}

export interface CookieOptionsCore {
  domain?: string
  httpOnly?: boolean
  maxAge?: number
  path?: string
  secure?: boolean
  signed?: boolean
  sameSite?: string
}

export declare function getAllCookies(core: ExternalObject<RequestCore>): Record<string, string>

export declare function getAllHeaders(core: ExternalObject<RequestCore>): Record<string, string>

export declare function getAllParams(core: ExternalObject<RequestCore>): Record<string, string>

export declare function getAllQuery(core: ExternalObject<RequestCore>): Record<string, Array<string>>

export declare function getBodyBuffer(core: ExternalObject<RequestCore>): Buffer

export declare function getCookie(core: ExternalObject<RequestCore>, name: string): string | null

export declare function getHeader(core: ExternalObject<RequestCore>, name: string): string | null

export declare function getHostname(core: ExternalObject<RequestCore>): string

export declare function getIp(core: ExternalObject<RequestCore>): string

export declare function getIps(core: ExternalObject<RequestCore>): Array<string>

export declare function getMethod(core: ExternalObject<RequestCore>): string

export declare function getParam(core: ExternalObject<RequestCore>, name: string): string | null

export declare function getPathname(core: ExternalObject<RequestCore>): string

export declare function getProtocol(core: ExternalObject<RequestCore>): string

export declare function getQueryParam(core: ExternalObject<RequestCore>, name: string): Array<string> | null

export declare function getSearch(core: ExternalObject<RequestCore>): string | null

export declare function getSecure(core: ExternalObject<RequestCore>): boolean

export declare function getUrl(core: ExternalObject<RequestCore>): string

export declare function getXhr(core: ExternalObject<RequestCore>): boolean

export interface Route {
  path: string
  method: 'GET' | 'POST' | 'PUT' | 'DELETE' | 'PATCH' | 'HEAD' | 'OPTIONS' | 'TRACE'
  handler: RouteHandler
  schema?: string
  staticResponse?: string
}

export interface SendFileOptionsCore {
  maxAge?: number
  root?: string
  lastModified?: boolean
  headers?: Record<string, string>
  dotfiles?: string
  acceptRanges?: boolean
  cacheControl?: boolean
  immutable?: boolean
}

/** buffer: [status_code(2)] [headers_len(4)] [headers_json] [body] */
export declare function sendResponse(channel: ExternalObject<ResponseChannel>, buffer: Buffer): void

export interface ServerOptionsCore {
  port: number
  host: string
  trustProxy?: boolean
  maxRequestSize?: number
  timeout?: number
}
